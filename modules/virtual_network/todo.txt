refactor to allow for multiple resource groups and locations per vnet